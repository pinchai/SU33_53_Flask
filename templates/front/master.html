<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
{#navbar#}
<div class="container-fluid p-0 m-0">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/">Fake2Fake</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item {{ "active" if module == 'home' else "" }}">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item {{ "active" if module == 'product' else "" }}">
                    <a class="nav-link" href="/product">Product</a>
                </li>
                <li class="nav-item {{ "active" if module == 'contact' else "" }}">
                    <a class="nav-link" href="/contact">Contact</a>
                </li>
                <li class="nav-item {{ "active" if module == 'about' else "" }}">
                    <a class="nav-link" href="/about">About</a>
                </li>
            </ul>
            <div class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <a
                        href="/cart"
                        class="btn btn-outline-success my-2 my-sm-0"
                        type="button"
                        id="cart"
                >
                    Cart(2)
                </a>
            </div>
        </div>
    </nav>
</div>

{% block content %}

{% endblock %}

{#footer#}
<footer class="bg-dark text-white pt-5 pb-4">
    <div class="container text-md-left">
        <div class="row text-md-left">
            <!-- Brand/Logo -->
            <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold text-warning">ShopBrand</h5>
                <p>
                    Your one-stop online shop for the best deals and latest trends. Shop with confidence!
                </p>
            </div>

            <!-- Quick Links -->
            <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold">Quick Links</h5>
                <p><a href="#" class="text-white" style="text-decoration: none;">Home</a></p>
                <p><a href="#" class="text-white" style="text-decoration: none;">Shop</a></p>
                <p><a href="#" class="text-white" style="text-decoration: none;">About Us</a></p>
                <p><a href="#" class="text-white" style="text-decoration: none;">Contact</a></p>
            </div>

            <!-- Customer Service -->
            <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold">Customer Service</h5>
                <p><a href="#" class="text-white" style="text-decoration: none;">FAQ</a></p>
                <p><a href="#" class="text-white" style="text-decoration: none;">Shipping</a></p>
                <p><a href="#" class="text-white" style="text-decoration: none;">Returns</a></p>
                <p><a href="#" class="text-white" style="text-decoration: none;">Order Status</a></p>
            </div>

            <!-- Contact -->
            <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold">Contact</h5>
                <p><i class="fa fa-home mr-3"></i> Phnom Penh, Cambodia</p>
                <p><i class="fa fa-envelope mr-3"></i> info@shopbrand.com</p>
                <p><i class="fa fa-phone mr-3"></i> +855 12 345 678</p>
                <div>
                    <a href="#" class="text-white mr-3"><i class="fa fa-facebook-official fa-lg"></i></a>
                    <a href="#" class="text-white mr-3"><i class="fa fa-twitter fa-lg"></i></a>
                    <a href="#" class="text-white mr-3"><i class="fa fa-instagram fa-lg"></i></a>
                </div>
            </div>
        </div>
        <!-- Horizontal Line -->
        <hr class="mb-4">
        <!-- Copyright -->
        <div class="row align-items-center">
            <div class="col-md-7 col-lg-8">
                <p>
                    Â© 2025 <span class="text-warning font-weight-bold">ShopBrand</span> | All Rights Reserved.
                </p>
            </div>
            <div class="col-md-5 col-lg-4">
                <div class="text-center text-md-right">
                    <a href="#" class="text-white mr-2"><i class="fa fa-cc-visa fa-lg"></i></a>
                    <a href="#" class="text-white mr-2"><i class="fa fa-cc-mastercard fa-lg"></i></a>
                    <a href="#" class="text-white"><i class="fa fa-cc-paypal fa-lg"></i></a>
                </div>
            </div>
        </div>
    </div>
</footer>
</body>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    let cart_list = JSON.parse(localStorage.getItem('cart_list') ?? '[]')
    let btn_add_to_cart = document.querySelectorAll('.btn_add_to_cart')
    let cart = document.getElementById('cart')

    let cart_list_tbody = document.getElementById('cart_list_tbody')

    let label_total_usd = document.getElementById('label_total_usd')
    let label_total_khr = document.getElementById('label_total_khr')

    cart.innerText = `Cart(${cart_list.length})`
    btn_add_to_cart.forEach(item => {
        item.addEventListener('click', function () {
            cart_list.push(
                {
                    'id': this.getAttribute('data-id'),
                    'title': this.getAttribute('data-title'),
                    'qty': 1,
                    'price': this.getAttribute('data-price'),
                    'image': this.getAttribute('data-image'),
                }
            )
            localStorage.setItem('cart_list', JSON.stringify(cart_list))
            cart.innerText = `Cart(${cart_list.length})`
            Swal.fire({
                position: "top-end",
                icon: "success",
                title: "Your work has been saved",
                showConfirmButton: false,
                timer: 1500
            });
        })
    })

    renderCartList()
    total()

    function renderCartList() {
        let string_tr = ''
        cart_list_tbody.innerHTML = ''
        cart_list.forEach((item, index) => {
            string_tr += `      <tr>
                                <td style="width:80px">
                                    <img src="${item.image}" class="img-fluid rounded" alt="Product 1">
                                </td>
                                <td>
                                    <h6 class="mb-0">${item.title}</h6>
                                </td>
                                <td>$${item.price}</td>
                                <td>
                                   <strong>${item.qty}</strong>
                                </td>
                                <td>$${item.qty * item.price}</td>
                                <td>
                                    <button onclick="removeCartItem(${index})" class="btn btn-sm btn-danger">X</button>
                                </td>
                            </tr>`
        })
        cart_list_tbody.innerHTML = string_tr
    }

    function removeCartItem(index) {
        Swal.fire({
            title: "Are you sure ðŸ¥¹?",
            text: "Do you want to remove this item",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Yes, remove it!"
        }).then((result) => {
            if (result.isConfirmed) {
                cart_list.splice(index, 1)
                localStorage.setItem('cart_list', JSON.stringify(cart_list))
                renderCartList()
            }
        });
    }

    function total() {
        let total_usd = 0
        let total_khr = 0
        cart_list.forEach(item=>{
            total_usd+= (parseFloat(item.qty) * parseFloat(item.price))
        })
        total_khr = total_usd * 4100
        total_khr= Math.ceil(total_khr / 100) * 100

        label_total_usd.innerText = `$${total_usd.toFixed(2)}`
        label_total_khr.innerText = `áŸ›${total_khr.toLocaleString()}`
    }
</script>
</html>
